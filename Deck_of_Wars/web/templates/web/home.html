{% extends 'web/base.html' %} {% load static %} {% block extra_css %}
<link rel="stylesheet" href="{% static 'web/css/main-menu.css' %}" />
{% endblock %} {% block content %}
<!-- Messages Display -->
{% if messages %} {% for message in messages %}
<div class="alert alert-info alert-dismissible fade show" role="alert">
  {{ message }}
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{% endfor %} {% endif %} {% if user.is_authenticated %}
<!-- Authenticated User Section -->
<div class="container-fluid game-container">
  <div class="row justify-content-center">
    <div class="col-12">
      <!-- Game Title -->
      <div class="text-center mb-4">
        <h1 class="game-title">
          <span class="title-power">POWER</span>
          <span class="title-clash">CLASH</span>
        </h1>
      </div>

      <!-- Main Menu Buttons -->
      <div class="menu-container mb-4">
        <a href="{% url 'Create' %}" class="comic-button btn-create">
          <i class="fas fa-users"></i> Create a Team
        </a>
        <a href="{% url 'Join' %}" class="comic-button btn-join">
          <i class="fas fa-hand-rock"></i> Join a Team
        </a>
        <button class="comic-button btn-rules" onclick="openRules()">
          <i class="fas fa-book"></i> Rules
        </button>
        <button
          class="comic-button btn-achievements"
          onclick="showAchievements()"
        >
          <i class="fas fa-trophy"></i> Achievements
        </button>
      </div>

      <!-- Logout Section -->
      <div class="text-center">
        <form action="{% url 'logout' %}" method="post" class="d-inline">
          {% csrf_token %}
          <button type="submit" class="btn-logout">
            <i class="fas fa-sign-out-alt me-2"></i> Log Out
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

{% else %}
<!-- Not Authenticated Section -->
<div class="container-fluid login-container">
  <div class="row justify-content-center align-items-center min-vh-100">
    <div class="col-12">
      <div class="text-center">
        <!-- Game Title -->
        <h1 class="game-title mb-4">
          <span class="title-power">POWER</span>
          <span class="title-clash">CLASH</span>
        </h1>

        <!-- Welcome Message -->
        <p class="login-message lead mb-5">
          Welcome! Please log in to start playing Power Clash.
        </p>

        <!-- Login Options -->
        <div class="login-options">
          <div class="menu-container">
            <a href="{% url 'login' %}" class="comic-button btn-login">
              <i class="fas fa-sign-in-alt"></i> Log In
            </a>
            <a href="{% url 'register' %}" class="comic-button btn-register">
              <i class="fas fa-user-plus"></i> Register
            </a>
            <a
              href="{% url 'guest_login' %}"
              class="comic-button btn-guest"
              style="grid-column: 1 / -1"
            >
              <i class="fas fa-user"></i> Play as Guest
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}

<!-- Rules Panel (Overlay) -->
<div class="rules-panel" id="rulesPanel" style="display: none">
  <h2>GAME RULES</h2>
  <div class="rules-content">
    <h3>Objective</h3>
    <p>
      Form teams and compete in epic power clashes to become the ultimate
      champions!
    </p>

    <h3>Team Formation</h3>
    <ul>
      <li>Create your own team or join an existing one</li>
      <li>Teams can have 2-8 players</li>
      <li>Choose your team name wisely - it represents your power!</li>
    </ul>

    <h3>Gameplay</h3>
    <ul>
      <li>Each player gets unique powers and abilities</li>
      <li>Work together to defeat opposing teams</li>
      <li>Strategic thinking and teamwork are key to victory</li>
      <li>Complete challenges to unlock achievements</li>
    </ul>

    <h3>Victory Conditions</h3>
    <p>The first team to complete all objectives wins the power clash!</p>
  </div>
  <button class="close-btn" onclick="closeRules()">Close</button>
</div>

<!-- Achievements Panel (Overlay) -->
<div class="rules-panel" id="achievementsPanel" style="display: none">
  <h2>ACHIEVEMENTS</h2>
  <div class="rules-content">
    <h3>üèÜ Team Builder</h3>
    <p>
      Created your first team! You're now officially a team captain, cape not
      included.
    </p>

    <h3>üéØ Joiner McJoinface</h3>
    <p>Joined a team! Because nobody likes playing alone, except cats.</p>

    <h3>üìö Rule Reader</h3>
    <p>Actually read the rules! You're probably the first person to do this.</p>

    <h3>üî• Hot Streak</h3>
    <p>
      Won 3 games in a row! Your opponents are probably questioning their life
      choices.
    </p>

    <h3>üêå Slowpoke Champion</h3>
    <p>
      Took more than 5 minutes to make a move. We almost sent a search party!
    </p>

    <h3>üé™ The Entertainer</h3>
    <p>Made everyone laugh during a game. Comedy gold right there!</p>
  </div>
  <button class="close-btn" onclick="closeAchievements()">Close</button>
</div>

<!-- Backdrop for Rules panel -->
<div
  class="rules-backdrop"
  id="rulesBackdrop"
  style="
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
  "
  onclick="closeRules(); closeAchievements();"
></div>

{% endblock %} {% block extra_js %}
<script src="{% static 'web/javascript/main-menu.js' %}"></script>
{% endblock %}
