{% extends 'web/base.html' %} 
{% load static %} 

{% block extra_css %}
<link rel="stylesheet" href="{% static 'web/css/main-menu.css' %}" />
{% endblock %} 

{% block content %}
<!-- Messages Display -->
{% if messages %} 
  {% for message in messages %}
    <div class="alert alert-info alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  {% endfor %} 
{% endif %} 

{% if user.is_authenticated %}
<!-- Authenticated User Section -->
<div class="container-fluid game-container">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <!-- Game Title -->
      <div class="text-center mb-4">
        <h1 class="game-title">
          <span class="title-power">POWER</span>
          <span class="title-clash">CLASH</span>
        </h1>
      </div>

      <!-- Main Menu Buttons -->
      <div class="menu-container mb-4">
        <div class="row">
          <div class="col-6 col-md-3 mb-3">
            <a href="{% url 'Create' %}" class="comic-button btn-create w-100 btn text-decoration-none d-flex flex-column align-items-center justify-content-center">
              <i class="fas fa-users mb-2"></i>
              <span>Create a Team</span>
            </a>
          </div>
          <div class="col-6 col-md-3 mb-3">
            <a href="{% url 'Join' %}" class="comic-button btn-join w-100 btn text-decoration-none d-flex flex-column align-items-center justify-content-center">
              <i class="fas fa-hand-rock mb-2"></i>
              <span>Join a Team</span>
            </a>
          </div>
          <div class="col-6 col-md-3 mb-3">
            <button class="comic-button btn-settings w-100" onclick="openSettings()">
              <i class="fas fa-cog mb-2"></i><br />
              <span>Settings</span>
            </button>
          </div>
          <div class="col-6 col-md-3 mb-3">
            <button class="comic-button btn-achievements w-100" onclick="showAchievements()">
              <i class="fas fa-trophy mb-2"></i><br />
              <span>Achievements</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Navigation Links -->
      <div class="navigation-links text-center mb-4">
        <div class="row">
          <div class="col-12 col-md-4 mb-2">
            <a href="{% url 'Join' %}" class="btn btn-outline-primary btn-block comic-nav-button">
              <i class="fas fa-door-open me-2"></i> Join Lobby
            </a>
          </div>
          <div class="col-12 col-md-4 mb-2">
            <a href="{% url 'Create' %}" class="btn btn-outline-success btn-block comic-nav-button">
              <i class="fas fa-plus-circle me-2"></i> Create Lobby
            </a>
          </div>
          <div class="col-12 col-md-4 mb-2">
            <a href="{% url 'Profile' %}" class="btn btn-outline-info btn-block comic-nav-button">
              <i class="fas fa-user-circle me-2"></i> Player Profile
            </a>
          </div>
        </div>
      </div>

      <!-- Logout Section -->
      <div class="text-center">
        <form action="{% url 'logout' %}" method="post" class="d-inline">
          {% csrf_token %}
          <button type="submit" class="btn btn-outline-danger comic-button btn-logout">
            <i class="fas fa-sign-out-alt me-2"></i> Log Out
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

{% else %}
<!-- Not Authenticated Section -->
<div class="container-fluid login-container">
  <div class="row justify-content-center align-items-center min-vh-100">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="text-center">
        <!-- Game Title -->
        <h1 class="game-title mb-4">
          <span class="title-power">POWER</span>
          <span class="title-clash">CLASH</span>
        </h1>

        <!-- Welcome Message -->
        <p class="login-message lead mb-5">
          Welcome! Please log in to start playing Power Clash.
        </p>

        <!-- Login Options -->
        <div class="login-options">
          <div class="row">
            <div class="col-12 col-md-4 mb-3">
              <a href="{% url 'login' %}" class="btn btn-primary btn-lg btn-block comic-button btn-login">
                <i class="fas fa-sign-in-alt mb-2"></i><br />
                <span>Log In</span>
              </a>
            </div>
            <div class="col-12 col-md-4 mb-3">
              <a href="{% url 'register' %}" class="btn btn-success btn-lg btn-block comic-button btn-register">
                <i class="fas fa-user-plus mb-2"></i><br />
                <span>Register</span>
              </a>
            </div>
            <div class="col-12 col-md-4 mb-3">
              <a href="{% url 'guest_login' %}" class="btn btn-secondary btn-lg btn-block comic-button btn-guest">
                <i class="fas fa-user mb-2"></i><br />
                <span>Play as Guest</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}

<!-- Settings Panel (Overlay) -->
<div class="settings-panel" id="settingsPanel" style="display: none">
  <div class="settings-content card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h2 class="mb-0"><i class="fas fa-cog me-2"></i> SETTINGS</h2>
      <button class="btn btn-sm btn-outline-secondary close-btn" onclick="closeSettings()" aria-label="Close">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="card-body">
      <div class="volume-control">
        <label for="volumeSlider" class="form-label">
          <i class="fas fa-volume-up me-2"></i> Master Volume:
        </label>
        <div class="d-flex align-items-center">
          <input type="range" id="volumeSlider" class="form-range volume-slider flex-grow-1 me-3" min="0" max="100" value="50" oninput="updateVolume(this.value)" />
          <span id="volumeValue" class="volume-display badge badge-primary">50%</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Backdrop for settings panel -->
<div class="settings-backdrop" id="settingsBackdrop" style="display: none" onclick="closeSettings()"></div>

{% endblock %} 

{% block extra_js %}
<script src="{% static 'web/js/main-menu.js' %}"></script>
{% endblock %}